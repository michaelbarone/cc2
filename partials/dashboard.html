<script src="js/controllers/dashboardCtrl.js"></script>
<div class="wrap dashboard" ng-controller="dashboardCtrl">
	<div id="header">
		<div id="user-menu" class="right">
			<img src="img/options.png" />
			<ul id="user-menu-ul" class="slideable">
				<li><a class="title">{{userdata.username}}</a></li>
				<li><a>Preferences</a></li>
				<li ng-if="userdata.settingsAccess"><a href="./#/settings">Settings</a></li>
				<li><a href="" ng-click="testmessage()">testmessage</a></li>
				<li><a href=""  ng-click="chatOpen = chatOpen ? false : true">Chat</a></li>
				<li>&nbsp;</li>
				<li><a href="" ng-click="logout()">Logout</a></li>
			</ul>
		</div>
		<div id="room-menu">
			<a class="title">{{rooms[0][userdata.currentRoom]['name']}}</a>
			<ul id="room-menu-ul" class="slideable">
				<table>
					<tr ng-repeat="(room,roomArray) in rooms[0]" ng-class="{'selected': userdata.currentRoom==room}">
						<td ng-click="changeRoom(room)" class="addonTitle">{{roomArray.name}}</td>
						<td>
							<!-- wakeAllAddons turns into powerOnAllRoomAddons(roomid) -> will then wake/poweron/switchtoinput that is specified per addon type or individually?
							-->
							<img ng-if="room_addons[0][room][0].allAddonsAlive==='0'" ng-click="wakeAllAddons(room_addons[0][room][0].allAddonsMacs)" class="status pointer" src="img/led-red.png"/>
							<img ng-if="room_addons[0][room][0].allAddonsAlive==='1'" class="status" src="img/led-green.png"/>
							<span ng-repeat="addon in room_addons[0][room]">
								<a ng-if="addon.info">{{addon.info}}</a><img ng-if="addon.infoType && addon.info" class="infoType" ng-src="img/info-{{addon.infoType}}.png"/>
							</span>
						</td>
					</tr>
				</table>
			</ul>
		</div>		
		<div id="link-menu">
			<nav>
				<ul class="sortable" ng-if="userdata.mobile==='0'">
					<li id="{{linkgroup}}-group" class="sortable clear" ng-repeat="(linkgroup, linkgrouparray) in links[0]" ng-click="userdata.linkGroupSelected=linkgroup;linkReOrder(linkgroup,$index)">
						<a class="main panel persistent title" ng-hide="$last && $index=='0'">{{linkgroup}}</a>
						<a id="{{thislink['navname']+'L'}}" scroll-to="{{thislink['navname']}}" class="main link persistent" ng-click="loadLink(thislink['navname']+'L');userdata.linkSelected=thislink" ng-class="{'selected': userdata.linkSelected==thislink}" ng-repeat="thislink in linkgrouparray">
							<img ng-src="img/Programs/{{thislink['navname']}}.png" height="35px">
						</a>
					</li>	
				</ul>
				<ul class="mobile" ng-if="userdata.mobile==='1'">
					<img height="50px" src="img/3dots.png" />
					<span ng-repeat="(linkgroup, linkgrouparray) in links[0]">
						<li id="{{thislink['navname']+'L'}}" scroll-to="{{thislink['navname']}}" class="main link persistent" ng-click="loadLink(thislink['navname']+'L');userdata.linkSelected=thislink" ng-class="{'selected': userdata.linkSelected==thislink}" ng-repeat="thislink in linkgrouparray">
							<img ng-src="img/Programs/{{thislink['navname']}}.png" height="35px">
						</li>
					</span>
				</ul>
			</nav>
		</div>
	</div>
	<div id="dashboardWrapper" scrolling="auto">
		<div id="dashboardMask">
			<span id="addonlinkspages">
				<div id="XBMCCONTROL1" class="dashboardPage">
					<div class="content">
						<iframe id="XBMCCONTROL1f" data-src="http://192.168.3.223:8080" data-src="http://192.168.3.223:8080" scrolling="no" height="100%" width="100%"> Sorry your browser does not support frames or is currently not set to accept them.</iframe>
					</div>
				</div>
			</span>
			<span ng-repeat="(linkgroup, linkgrouparray) in links[0]">
				<div class="dashboardPage" ng-repeat="thislink in linkgrouparray">
					<div class="content">
						<iframe id="{{thislink['navname']}}" src="" data="{{thislink['navip'] | trustUrl }}" scrolling="auto" height="100%" width="100%"> Sorry your browser does not support frames or is currently not set to accept them.</iframe>
					</div>
				</div>
			</span>
		</div>
	</div>
	<div id="chatContainer" ng-class="{'open' : chatOpen == true}" class="transformable-horizontal" chat></div>
</div>